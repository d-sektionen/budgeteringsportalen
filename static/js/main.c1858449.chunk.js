(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},115:function(e,t,n){},137:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(19),r=n.n(i),s=(n(108),n(109),n(57)),o=n(4),l=(n(110),n(3)),d=n(25),j=n.p+"static/media/round.6d62ac2d.svg",u=n(262),p=(n(111),n(1)),b=[{title:"Mina sidor",link:"/overview"},{title:"Personligt utl\xe4gg",link:"/"}],m=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(o.f)(),r=function(e){27===e.keyCode&&a(!1)};return Object(c.useEffect)((function(){return document.addEventListener("keydown",r,!1),function(){return document.removeEventListener("keydown",r,!1)}}),[]),Object(p.jsxs)("div",{className:"menuContainer",children:[Object(p.jsx)(u.a,{direction:"right",in:n,timeout:300,children:Object(p.jsxs)("div",{className:"menu",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)(d.c,{className:"exit",onClick:function(){return a(!n)}}),Object(p.jsxs)("a",{className:"imgWrapper",href:"https://d-sektionen.se",children:[Object(p.jsx)("img",{src:j,alt:"D-sek logo",useMap:"circle"}),Object(p.jsx)("map",{name:"circle",children:Object(p.jsx)("area",{shape:"circle",alt:"D-sek",coors:"0,100%,100%,100%"})})]})]}),Object(p.jsx)("ul",{children:b.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)("p",{onClick:function(){a(!1),i(e.link)},className:"menuItem",children:e.title})},e.title)}))}),Object(p.jsxs)("div",{className:"footer",children:[Object(p.jsx)("p",{children:"Sidan \xe4r utvecklad av Webbgruppen"}),Object(p.jsx)("div",{children:Object(p.jsx)("a",{href:"https://github.com/d-sektionen/medlem",children:Object(p.jsx)(d.a,{})})})]})]})}),Object(p.jsx)(d.b,{className:"icon",onClick:function(){return a(!n)}}),n&&Object(p.jsx)("div",{onClick:function(){return a(!1)},className:"darkOverlay"})]})},h=function(){return Object(p.jsxs)("div",{id:"topBar",children:[Object(p.jsx)(m,{}),Object(p.jsx)("span",{children:"R\xe4kning till d-sektionen"}),Object(p.jsx)("div",{})]})},x=(n(115),n(47),function(e){var t=e.onClick,n=e.href,c=e.title;return n?Object(p.jsx)("a",{className:"button",href:n,children:Object(p.jsx)("span",{className:"button-text",children:" Logga in med LiU-ID "})}):Object(p.jsx)("div",{className:"button",onClick:function(){return t()},children:Object(p.jsx)("span",{className:"button-text",children:c})})}),O=function(){return Object(p.jsxs)("div",{id:"login",children:[Object(p.jsx)("h1",{children:"Logga in"}),Object(p.jsx)("p",{children:"Genom att logga in h\xe4r kan du komma \xe5t D\u2011sektionens portal f\xf6r att hantera digitala personliga utl\xe4gg, inloggningen sker via LiUs centrala inloggningssystem."}),Object(p.jsxs)("p",{children:["Genom att logga in godk\xe4nner du att dina personuppgifter hanteras i enlighet med "," ",Object(p.jsx)("a",{href:"https://d-sektionen.se/wp-content/uploads/2018/05/Policy-datahantering-D-sektionen.pdf",children:" D\u2011sektionens datahanteringspolicy"}),"."]}),Object(p.jsx)("p",{children:Object(p.jsx)(x,{href:"http://localhost:8000/account/token/?redirect=http://localhost:3000"})})]})},f=n(15),v=n.n(f),g=n(24),k=n(5),N=n(42),y=n.n(N),w=function(e){var t=/^https?:\/\//.test(e.endpoint)?e.endpoint:"https://backend.d-sektionen.se/"+e.endpoint,n=window.localStorage.getItem("token"),c=e.headers?e.headers:{},a=Object(k.a)(Object(k.a)({},c),{},{Authorization:"Bearer ".concat(n)});return y()(Object(k.a)(Object(k.a)({},e),{},{headers:a,url:t}))},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(Object(k.a)(Object(k.a)({},t),{},{method:"get",endpoint:e}))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w(Object(k.a)(Object(k.a)({},n),{},{data:t,method:"post",endpoint:e}))},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w(Object(k.a)(Object(k.a)({},n),{},{data:t,method:"put",endpoint:e}))},F=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,c,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={}).authorization="Bearer "+window.localStorage.getItem("token"),n={method:"get",headers:new Headers(t)},e.next=5,fetch("https://backend.d-sektionen.se/account/me",n);case 5:if(400===(c=e.sent).status&&401===c.status){e.next=12;break}return e.next=9,c.json();case 9:return a=e.sent,console.log(a),e.abrupt("return",{liuid:a.username,name:a.pretty_name,committees:a.committees,treasurer:a.contact_for,privileges:a.privileges});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=Object(c.createContext)(),I=function(e,t){switch(t.type){case"LOGIN":return Object(k.a)(Object(k.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(k.a)(Object(k.a)({},e),{},{user:void 0});case"AUTH_READY":return Object(k.a)(Object(k.a)({},e),{},{user:t.payload,authFinished:!0});default:return e}},L=function(e){var t=e.children,n=Object(c.useReducer)(I,{user:void 0,authFinished:!1}),a=Object(l.a)(n,2),i=a[0],r=a[1];return console.log(i),Object(p.jsx)(D.Provider,{value:Object(k.a)(Object(k.a)({},i),{},{dispatch:r}),children:t})},E=function(){var e=Object(c.useContext)(D);if(!e)throw Error("useAuthContext must be inside an AuthContextProvider");return e},A=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),r=Object(l.a)(i,2),s=r[0],o=r[1],d=Object(c.useState)(),j=Object(l.a)(d,2),u=j[0],p=j[1],b=E().dispatch,m=function(){var e=Object(g.a)(v.a.mark((function e(t){var c,a,i,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(void 0),o(!0),e.prev=2,c=new URLSearchParams(window.location.search),null==(a=c.get("access"))){e.next=15;break}return window.localStorage.setItem("token",a),window.history.replaceState({},document.title,"/"),e.next=10,F();case 10:i=e.sent,console.log(i),b({type:"LOGIN",payload:i}),e.next=20;break;case 15:if("null"===window.localStorage.getItem("token")&&null==window.localStorage.getItem("token")){e.next=20;break}return e.next=18,F();case 18:r=e.sent,b({type:"LOGIN",payload:(null===r||void 0===r?void 0:r.liuid)?r:void 0});case 20:n||(o(!1),p(void 0)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),n||(console.log(e.t0.message),p(e.t0.message),o(!1));case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){a(!0)}}),[]),{login:m,isPending:s,error:u}},P=n(95),T=n(9),R=n(8),U=(n(137),function(e){var t,n,a,i=e.i,r=Object(R.e)(),s=r.values.priceBoxes,o=r.touched,l=r.setFieldValue,d=s[i];return Object(c.useEffect)((function(){d&&(null===d||void 0===d?void 0:d.price)&&(null===d||void 0===d?void 0:d.amount)?l("priceBoxes.".concat(i,".total"),d.price*d.amount):l("priceBoxes.".concat(i,".total"),0)}),[d,i,l]),Object(p.jsxs)("div",{className:"priceBox",children:[Object(p.jsxs)("div",{id:"spec",className:"".concat(o.priceBoxes&&(null===o||void 0===o||null===(t=o.priceBoxes[i])||void 0===t?void 0:t.spec)&&!console.log(o)&&""===d.spec?"error":""),children:[Object(p.jsx)("p",{children:"Specifikation"}),Object(p.jsx)(R.a,{className:"inputField",title:"Specifikation",name:"priceBoxes.".concat(i,".spec"),type:"text"})]}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("div",{id:"price",className:"".concat(o.priceBoxes&&(null===o||void 0===o||null===(n=o.priceBoxes[i])||void 0===n?void 0:n.price)&&!d.price?"error":""),children:[Object(p.jsx)("p",{children:"Pris"}),Object(p.jsx)(R.a,{className:"inputField",title:"pris",name:"priceBoxes.".concat(i,".price"),type:"number"})]}),Object(p.jsxs)("div",{id:"amount",className:"".concat(o.priceBoxes&&(null===o||void 0===o||null===(a=o.priceBoxes[i])||void 0===a?void 0:a.amount)&&!d.amount?"error":""),children:[Object(p.jsx)("p",{children:"Antal"}),Object(p.jsx)(R.a,{className:"inputField",title:"antal",name:"priceBoxes.".concat(i,".amount"),type:"number"})]}),Object(p.jsxs)("div",{id:"sum",children:[Object(p.jsx)("p",{children:"Summa"}),Object(p.jsx)(R.a,{className:"inputField",title:"summa",readOnly:!0,name:"priceBoxes.".concat(i,".total")})]})]})]})}),K=n(12),_=(n(236),function(e){var t=e.title,n=e.placeholder,c=e.name,a=e.error,i=e.isFormik,r=void 0===i||i;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"multilineBox span-2 ".concat(a?"error":""),children:[Object(p.jsx)("p",{className:"title",children:t}),r&&Object(p.jsx)(R.a,{name:c,placeholder:n,rows:4,component:"textarea"}),!r&&Object(p.jsx)("textarea",{value:n,readOnly:!0,rows:7})]})})}),V=function(e){var t=e.values,n=e.error,a=e.title,i=e.setFieldValue,r=Object(c.useState)(0),s=Object(l.a)(r,2),o=s[0],d=s[1];return Object(c.useEffect)((function(){var e=0;t&&t.forEach((function(t){var n=t.price,c=t.amount;e+=n*c})),d(e)}),[t,i]),Object(p.jsxs)("div",{className:"inputTextBox margin-0 ".concat(n?"error":""),children:[Object(p.jsx)("p",{className:"title",children:a}),Object(p.jsx)("input",{id:"totalPrice",name:"totalPrice",value:isNaN(o)?0:o,readOnly:!0})]})},q=(n(237),function(e){var t=e.name,n=e.value,a=e.handleChange,i=e.error,r=Object(c.useState)([]),s=Object(l.a)(r,2),o=s[0],d=s[1];return Object(c.useEffect)((function(){d(function(){var e=window.localStorage.getItem("token"),t={Authorization:"Bearer ".concat(e)},n=[];return y()({method:"get",url:"http://localhost:8000/committee/all/",headers:t}).then((function(e){console.log(e.data),e.data.forEach((function(e){n.push(e.name)}))})).catch((function(e){console.log(e.data)})),n}())}),[]),Object(p.jsxs)("div",{className:"margin-0 inputTextBox ".concat(i?"error":""),children:[Object(p.jsx)("p",{className:"title",children:"Utskott"}),Object(p.jsxs)("select",{name:t,value:n,onChange:a,children:[Object(p.jsx)("option",{value:"",disabled:!0,defaultValue:!0,children:"V\xe4lj utskott"}),o.map((function(e,t){return Object(p.jsx)("option",{value:t,children:e},t)}))]})]})}),G=function(e){var t=e.titleText,n=Object(c.useState)(t),a=Object(l.a)(n,1)[0];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"textBoxTitle",children:Object(p.jsx)("p",{className:"title",children:a})})})},J=(n(238),function(e){var t=e.title,n=e.temp,a=e.name,i=e.id,r=e.error,s=e.isFormik,o=void 0===s||s,d=Object(c.useState)("untouched"),j=Object(l.a)(d,2),u=j[0],b=j[1];return Object(p.jsxs)("div",{className:"inputTextBox ".concat(r?"error":""),children:[Object(p.jsx)("p",{className:"title",children:t}),a&&o&&Object(p.jsx)(R.a,{id:i,name:a,type:"text",placeholder:n,className:u,onKeyPress:function(e){"INIT_VALUE"!=e.target.value&&b("touched")}}),!a&&o&&Object(p.jsx)(R.a,{type:"text",value:n,readOnly:!0}),!o&&Object(p.jsxs)("p",{className:"displayBox",children:[" ",n]})]})}),z=(n(239),function(e){var t=e.name,n=e.id,c=e.error,a=e.handleChange;e.isFormik;return Object(p.jsxs)("div",{className:"",children:[Object(p.jsx)("input",{name:t,id:n,type:"file",accept:".pdf",multiple:!0,onChange:a}),Object(p.jsx)("label",{htmlFor:n,className:"button file-input-label",children:"Bifoga kvitto"}),document.getElementById(n)&&Array.from(document.getElementById(n).files).map((function(e,t){return Object(p.jsx)("p",{children:e.name})})),c&&Object(p.jsx)("div",{className:"wrong-file-format",children:"Ni m\xe5ste bifoga en pdf!"})]})}),M=(n(240),"Du m\xe5ste fylla i detta f\xe4lt!"),W=K.c().shape({description:K.d().required(M),clearingNumber:K.d().matches(/^[0-9-]*$/).min(4,"F\xf6r kort!").required(M),accountNumber:K.d().matches(/^[0-9- ]*$/).required(M),bankName:K.d().matches(/^[aA-\xf6\xd6\s]+$/).required(M),priceBoxes:K.a().of(K.c().shape({spec:K.d().required(M),price:K.b().positive().required(M),amount:K.b().positive().required(M)})),utskott:K.d().required(M),fileinput:K.a().nullable().test("correct-type",M,(function(){var e,t=document.getElementById("fileinput").files,n=Object(T.a)(t);try{for(n.s();!(e=n.n()).done;){if("application/pdf"!==e.value.type)return!1}}catch(c){n.e(c)}finally{n.f()}return!0}))}),$=function(e){Object(P.a)(e);var t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)([]),s=Object(l.a)(r,2),o=s[0],d=s[1],j=E(),u=j.user,b=(j.authFinished,[{title:"Clearing-nr",temp:"8123-4",name:"clearingNumber"},{title:"Konto-nr",temp:"123 456 789-0",name:"accountNumber"},{title:"Bank",temp:"D-Bank",name:"bankName"}]),m=[{title:"LiU-id",temp:null===u||void 0===u?void 0:u.liuid},{title:"Namn",temp:null===u||void 0===u?void 0:u.name,name:"name"},{title:"Ort",temp:"Link\xf6ping",name:"city"},{title:"Datum",temp:a}];Object(c.useEffect)((function(){var e=new Date;i(e.toDateString())}),[a]);var h=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var c,a,i,r,s,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.resetForm,console.log(JSON.stringify(t,null,2)),console.log(t),c=new FormData,a=function(e){return new Promise((function(t,n){var c=new FileReader;c.onload=function(e){t(e.target.result)},c.onerror=n,c.readAsDataURL(e)}))},i=Object(T.a)(o),e.prev=6,i.s();case 8:if((r=i.n()).done){e.next=16;break}return s=r.value,e.next=12,a(s);case 12:l=e.sent,c.append("files[]",l);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),i.e(e.t0);case 21:return e.prev=21,i.f(),e.finish(21);case 24:c.append("document",JSON.stringify(t)),c.append("name",t.name),c.append("bankName",t.bankName),c.append("bankNr",t.accountNumber),c.append("clearingNr",t.clearingNumber),c.append("location",t.city),c.append("articles",JSON.stringify(t.priceBoxes)),c.append("description",t.description),c.append("committee_id",parseInt(t.utskott)+1),c.append("date",(new Date).toISOString()),window.localStorage.getItem("token"),S("/budget/expense-entries/",c,{"Content-Type":"application/x-www-form-urlencoded"}).then((function(e){console.log(e.status),201===e.status&&alert("Success")})).catch((function(e){alert("There was an error"),e.response&&(console.log(e.response),console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers))}));case 37:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(R.d,{initialValues:{description:"",clearingNumber:"",accountNumber:"",bankName:"",priceBoxes:[{spec:"",price:0,amount:0}],liuId:u.liuid,name:u.name,city:"Link\xf6ping",signDate:a,utskott:"",fileinput:[]},validationSchema:W,onSubmit:h,children:function(e){var t=e.errors,n=e.values,c=e.touched,a=e.setFieldValue,i=e.handleChange;return Object(p.jsxs)(R.c,{className:"container",autoComplete:"off",children:[Object(p.jsx)("div",{className:"textboxRow",children:Object(p.jsx)(R.b,{name:"priceBoxes",render:function(e){return Object(p.jsxs)(p.Fragment,{children:[n.priceBoxes.map((function(e,t){return Object(p.jsx)(U,{i:t},t)})),n.priceBoxes.length>1&&Object(p.jsx)(x,{type:"button",onClick:function(){e.pop()},title:"Ta bort rad"}),Object(p.jsx)(x,{type:"button",onClick:function(){return e.push({spec:"",price:0,amount:0})},title:"L\xe4gg till rad"})]})}})}),Object(p.jsxs)("div",{className:"textboxRow grid-2-1",children:[Object(p.jsx)(_,{title:"\xc4ndam\xe5l med ink\xf6pet",placeholder:"Jag k\xf6pte dessa saker f\xf6r att...",name:"description",error:(null===c||void 0===c?void 0:c.description)&&(null===t||void 0===t?void 0:t.description)}),Object(p.jsx)(V,{id:"totalPrice",title:"Totalt",name:"totalPrice",value:n.totalPrice,values:n.priceBoxes,setFieldValue:a,readOnly:!0}),Object(p.jsx)(q,{name:"utskott",value:n.utskott,handleChange:i,error:c.utskott&&t.utskott})]}),Object(p.jsxs)("div",{className:"textboxRow",children:[Object(p.jsx)(G,{titleText:"Kontouppgifter f\xf6r \xf6verf\xf6ring"}),b.map((function(e,n){return Object(p.jsx)(J,{title:e.title,temp:e.temp,name:e.name,id:e.name,error:c[e.name]&&t[e.name]},n)}))]}),Object(p.jsxs)("div",{className:"textboxRow",children:[Object(p.jsx)(G,{titleText:"\xd6vriga uppgifter"}),m.map((function(e,t){return Object(p.jsx)(J,{title:e.title,temp:e.temp,name:e.name,id:e.name},t)}))]}),Object(p.jsx)(z,{name:"fileinput",error:t.fileinput,handleChange:function(e){i(e),d(e.target.files)},id:"fileinput"}),Object(p.jsx)("div",{className:"textboxRow",children:Object(p.jsxs)("label",{className:"".concat(t.sign&&c.sign?"error":""),children:[Object(p.jsx)(R.a,{type:"checkbox",name:"sign"}),Object(p.jsx)("p",{className:"warning",children:"Genom att signera intygar jag att ovanst\xe5ende \xe4r korrekt och sanningsenligt samt att sektionen f\xe5r lagra informationen i detta formul\xe4r tillsvidare i bokf\xf6ringssyfte."})]})}),Object(p.jsx)("button",{className:"button",type:"submit",children:"Submit"})]})}})})})},H=(n(91),function(){var e=A().login,t=E(),n=t.user;t.authFinished;return Object(c.useEffect)((function(){var t=new URLSearchParams(window.location.search).get("access");n||e(t)}),[]),console.log(n),Object(p.jsxs)("div",{id:"mainPage",children:[!n&&Object(p.jsx)(O,{}),n&&Object(p.jsx)($,{})]})}),Y=n(101),Q=n.n(Y),X=n(102),Z=n(13),ee=(n(250),function(e){var t=e.handleClick,n=e.children,c=e.title,a=e.disabled,i=e.active,r=void 0!==i&&i;return Object(p.jsx)("div",{title:c,className:"roundButton ".concat(r&&!a?"Avf\xe4rda"==c?"red":"green":""),onClick:a?null:t,children:n})}),te=function(e){var t=e.print,n=e.attest,c=e.book,a=e.payed,i=e.deny,r=e.handlePrint,s=e.handlePayed,o=e.handleBooked,l=e.handleAttest,d=e.handleDenied,j=e.status;console.log(j);var u=E(),b=u.user;u.authFinished;console.log(b);return Object(p.jsxs)("div",{className:"formButton",children:[t&&Object(p.jsx)(ee,{title:"Skriv ut",handleClick:r,children:Object(p.jsx)(Z.d,{})}),i&&Object(p.jsx)(ee,{title:"Avf\xe4rda",handleClick:d,active:j.denied,children:Object(p.jsx)(Z.e,{})}),n&&Object(p.jsx)(ee,{title:"Attestera",handleClick:l,disabled:j.denied,active:j.approvedKas,children:Object(p.jsx)(Z.b,{})}),c&&Object(p.jsx)(ee,{title:"Bokf\xf6r",handleClick:o,disabled:j.denied,active:j.booked,children:Object(p.jsx)(Z.a,{})}),a&&Object(p.jsx)(ee,{title:"Betala",handleClick:s,disabled:j.denied,active:j.payed,children:Object(p.jsx)(Z.c,{})})]})},ne=n.p+"static/media/Color_white.da76c6c9.svg",ce=(n(251),function(e){var t=e.values,n=Object(c.useState)(0),a=Object(l.a)(n,2),i=a[0],r=a[1];return Object(c.useEffect)((function(){r(function(){var e=0;return t.forEach((function(t){e+=t.amount*t.price})),e}())}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"specContainer",children:[Object(p.jsxs)("div",{className:"stitle srow",children:[Object(p.jsx)("div",{className:"scol large",children:Object(p.jsx)("p",{children:"Specifikation"})}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:"Antal"})}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:"Pris"})}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:"Summa"})})]}),t.map((function(e,t){return Object(p.jsxs)("div",{className:"srow",children:[Object(p.jsx)("div",{className:"scol large",children:Object(p.jsx)("p",{children:e.spec})}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:e.amount})}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:e.price})}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:(e.amount*e.price).toFixed(2)})})]})})),Object(p.jsxs)("div",{className:"stitle srow",children:[Object(p.jsx)("div",{className:"scol large"}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:"Total"})}),Object(p.jsx)("div",{className:"scol",children:Object(p.jsx)("p",{children:i})})]})]})})}),ae=(n(252),function(e){var t=e.data,n=void 0===t?{}:t,a=e.updateOverview,i=Object(c.useRef)(),r=Object(X.useReactToPrint)({content:function(){return i.current}}),s=[n.committee,n.user.username,n.name,n.location,n.date],o=[n.clearingNr,n.bankNr,n.bankName];return Object(p.jsxs)("div",{style:{margin:"auto"},children:[Object(p.jsxs)("div",{className:"form-container",ref:i,children:[Object(p.jsx)("div",{className:"rect-img-wrapper",children:Object(p.jsx)("img",{src:ne,alt:"d-sektionen logo"})}),Object(p.jsx)(ce,{values:n.articles}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"descr-title descr-text",children:"\xc4ndam\xe5l med ink\xf6pet"}),Object(p.jsx)("p",{className:"descr-text",children:n.description})]})}),Object(p.jsxs)("div",{className:"infoContainer",children:[Object(p.jsx)("p",{className:"t-info-title",children:"Kontouppgifter f\xf6r \xf6verf\xf6ring"}),["Clearing-nr","Konto-nr","Bank"].map((function(e,t){return Object(p.jsxs)("div",{className:"t-row",children:[Object(p.jsx)("div",{className:"trow-title",children:Object(p.jsx)("p",{children:e})}),Object(p.jsx)("div",{className:"t-val",children:Object(p.jsx)("p",{children:o[t]})})]})}))]}),Object(p.jsxs)("div",{className:"infoContainer",children:[Object(p.jsx)("p",{className:"t-info-title",children:"\xd6vriga Uppgifter"}),["Utskott","Liu-ID","Namn","Ort","Datum"].map((function(e,t){return Object(p.jsxs)("div",{className:"t-row",children:[Object(p.jsx)("div",{className:"trow-title",children:Object(p.jsx)("p",{children:e})}),Object(p.jsx)("div",{className:"t-val",children:Object(p.jsx)("p",{children:s[t]})})]})}))]}),Object(p.jsxs)("div",{style:{display:"flex",paddingTop:18},children:[Object(p.jsx)("input",{type:"checkbox",id:"horns",name:"horns",checked:!0}),Object(p.jsx)("p",{className:"warning",children:"Genom att signera intygar jag att ovanst\xe5ende \xe4r korrekt och sanningsenligt samt att sektionen f\xe5r lagra informationen i detta formul\xe4r tillsvidare i bokf\xf6ringssyfte."})]})]}),Object(p.jsx)("div",{style:{marginLeft:"10%"},children:n.receipts.map((function(e,t){return Object(p.jsx)("a",{className:"descr-text",href:e.file,target:"_blank",rel:"noopener noreferrer",children:"Underlag ".concat(t+1)})}))}),n.comment&&Object(p.jsxs)("div",{style:{marginLeft:"10%"},children:[Object(p.jsx)("p",{children:"Kommentarer:"}),n.comment]}),Object(p.jsx)("div",{style:{display:"flex",justifyContent:"end",width:"80%",margin:"auto",padding:"16px"},children:Object(p.jsx)(te,{print:!0,attest:!0,book:!0,payed:!0,deny:!0,handlePrint:r,handlePayed:function(){var e="/budget/expense-entries/".concat(n.id,"/approve/"),t=new FormData;t.append("approvedKas",!0),t.append("approvedDeg",!0),t.append("payed",!0),t.append("user_id",1),C(e,t).then((function(e){return a()})).catch((function(e){return console.log(e)}))},handleBooked:function(){var e="/budget/expense-entries/".concat(n.id,"/approve/"),t=!n.denied&&prompt("Verifikationsnummer","");if(t&&""!==t){var c=new FormData;c.append("approvedKas",!0),c.append("approvedDeg",!0),c.append("user_id",1),C(e,c).then((function(e){console.log(e);var c="/budget/expense-entries/".concat(n.id,"/comment/"),i=new FormData;i.append("comment",""+t),i.append("user_id",1),C(c,i).then((function(e){a()})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}},handleAttest:function(){var e="/budget/expense-entries/".concat(n.id,"/approve/"),t=new FormData;t.append("approvedKas",!0),t.append("user_id",1),C(e,t).then((function(e){a()})).catch((function(e){return console.log(e)})),console.log(n.id)},handleDenied:function(){console.log("neka");var e=prompt("Anledning","");if(console.log(e),e&&""!==e){var t="/budget/expense-entries/".concat(n.id,"/approve/"),c=new FormData;c.append("denied",!0),c.append("user_id",1),C(t,c).then((function(t){console.log(t);var c="/budget/expense-entries/".concat(n.id,"/comment/"),i=new FormData;i.append("user_id",1),i.append("comment",e),C(c,i).then((function(e){return a()})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}},status:{denied:n.denied,approvedKas:n.approvedKas,booked:n.approvedDeg,payed:n.payed}})})]})}),ie=(n(253),function(e){var t=e.doc,n=e.updateOverview,a=Object(c.useState)(!1),i=Object(l.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)(!0),j=Object(l.a)(o,2),u=j[0],b=(j[1],function(){s(!0)});Object(c.useEffect)((function(){var e=new URLSearchParams(window.location.search);t.id==e.get("id")&&b()}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Q.a,{isOpen:r,contentLabel:"Item",style:{content:{maxWidth:"fit-content",display:"flex",margin:"auto"}},children:Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(p.jsx)(d.c,{onClick:function(){s(!1);var e=new URLSearchParams(window.location.search);e.has("id")&&(e.delete("id"),window.location.search="")},className:"exitButton"}),Object(p.jsx)(ae,{data:t,updateOverview:n})]})}),Object(p.jsxs)("div",{className:"listItem",onClick:b,children:[Object(p.jsxs)("p",{children:["Utl\xe4gg av ",t.user.username+" "+t.date.substring(0,10)]}),u&&Object(p.jsxs)("div",{children:[Object(p.jsxs)("label",{className:"statusLabel ".concat(t.approvedKas?"approved":"disabled"),children:["Attesterat"," ",Object(p.jsx)(Z.b,{})]}),Object(p.jsxs)("label",{className:"statusLabel ".concat(t.approvedDeg?"approved":"disabled"),children:["Bokf\xf6rt"," ",Object(p.jsx)(Z.a,{})]}),Object(p.jsxs)("label",{className:"statusLabel ".concat(t.payed?"approved":"disabled"),children:["Betalt"," ",Object(p.jsx)(Z.c,{})]}),t.denied&&Object(p.jsxs)("label",{className:"deniedLabel",children:["Nekad"," ",Object(p.jsx)(Z.e,{})]})]})]})]})}),re=(n(254),function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)({}),r=Object(l.a)(i,2),s=(r[0],r[1]),o=Object(c.useState)({attesterad:!0,bokford:!0,betalad:!0,nekad:!1}),d=Object(l.a)(o,2),j=d[0],u=d[1],b=function(){Number(j.attesterad),Number(j.bokford),Number(j.betalad);B("/budget/expense-entries/").then((function(e){var t,n=e.data,c=Object(T.a)(n);try{for(c.s();!(t=c.n()).done;){var i=t.value;i.committee=i.committee.name}}catch(r){c.e(r)}finally{c.f()}a(n)}))},m=function(e){var t=document.getElementById("Attesterade").checked,n=document.getElementById("Bokf\xf6rda").checked,c=document.getElementById("Betalade").checked;u({attesterad:t,bokford:n,betalad:c,nekad:!1})};return Object(c.useEffect)((function(){b()}),[j]),Object(c.useEffect)((function(){b();var e=setInterval((function(){b()}),2e4);return B("/account/me").then((function(e){s(e)})),function(){return clearInterval(e)}}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{id:"overView",className:"container",children:[Object(p.jsx)("h2",{children:"\xd6versikt"}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:["Antal utl\xe4gg: ",n.length]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",id:"Attesterade",name:"attesterade",onChange:m}),Object(p.jsx)("label",{htmlFor:"attesterade",children:"Attesterade"}),Object(p.jsx)("input",{type:"checkbox",id:"Bokf\xf6rda",name:"Bokf\xf6rda",onChange:m}),Object(p.jsx)("label",{htmlFor:"Bokf\xf6rda",children:"Bokf\xf6rda"}),Object(p.jsx)("input",{type:"checkbox",id:"Betalade",name:"Betalade",onChange:m}),Object(p.jsx)("label",{htmlFor:"Betalade",children:"Betalade"})]})]}),Object(p.jsx)("div",{id:"overViewList",children:n&&n.map((function(e,t){return Object(p.jsx)(ie,{doc:e,updateOverview:b},t)}))})]})})}),se=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(s.a,{children:[Object(p.jsx)(h,{}),Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{exact:!0,path:"/overview",element:Object(p.jsx)(re,{})}),Object(p.jsx)(o.a,{path:"/",element:Object(p.jsx)(H,{})}),Object(p.jsx)(o.a,{path:"*",element:Object(p.jsx)("main",{style:{padding:"1rem"},children:Object(p.jsx)("p",{children:"Oops, denna sidan \xe4r tom!"})})})]})]})})};r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(L,{children:Object(p.jsx)(se,{})})}),document.getElementById("root"))},47:function(e,t,n){},91:function(e,t,n){}},[[255,1,2]]]);
//# sourceMappingURL=main.c1858449.chunk.js.map